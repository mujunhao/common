syntax = "proto3";

package api.product.v1;

option go_package = "product/v1;v1";

import "google/protobuf/struct.proto";
import "google/protobuf/timestamp.proto";

service ProductManagementService {
  // 获取产品详情
  rpc GetProduct(GetProductRequest) returns (GetProductResponse);
  // 商户获取产品详情
  rpc MerchantGetProduct(MerchantGetProductRequest) returns (MerchantGetProductResponse);
}

// 产品状态枚举
enum ProductStatus {
  PRODUCT_STATUS_UNSPECIFIED = 0;
  // 草稿
  PRODUCT_STATUS_DRAFT = 1;
  // 上架
  PRODUCT_STATUS_ACTIVE = 2;
  // 下架
  PRODUCT_STATUS_INACTIVE = 3;
  // 停产
  PRODUCT_STATUS_DISCONTINUED = 4;
}

// 产品信息
message ProductInfo {
  uint32 id = 1 [json_name = "id"];                                       // 产品ID
  string product_code = 2 [json_name = "productCode"];                    // 产品编码
  string product_name = 11 [json_name = "productName"];                    // 产品名称
  google.protobuf.Struct i18n = 3 [json_name = "i18n"];                   // 多语言内容
  string image = 4 [json_name = "image"];                                // 产品图片UUID
  repeated string dimensions = 5 [json_name = "dimensions"];              // 产品选用的维度列表
  optional uint32 category_id = 6 [json_name = "categoryId"];             // 分类ID
  optional string category_name = 7 [json_name = "categoryName"];         // 分类名称
  repeated string tags = 8 [json_name = "tags"];                          // 产品标签
  int32 sort_order = 9 [json_name = "sortOrder"];                         // 排序
  ProductStatus status = 10 [json_name = "status"];                       // 状态
  int32 subscription_count = 16 [json_name = "subscriptionCount"];        // 订阅数量
  optional int64 price_monthly = 17 [json_name = "priceMonthly"];        // 月付价格（商户端使用）
  //  repeated PlanInfo plans = 18 [json_name = "plans"];                    // 套餐列表（仅当 includePlans=true 时返回）
  google.protobuf.Timestamp create_time = 14 [json_name = "createTime"];  // 创建时间
  google.protobuf.Timestamp update_time = 15 [json_name = "updateTime"];  // 更新时间
}

// 获取产品请求
message GetProductRequest {
  string product_code = 1 [json_name = "productCode"];                    // 产品编码
  optional bool include_plans = 2 [json_name = "includePlans"];           // 是否包含套餐列表
}

// 获取产品响应
message GetProductResponse {
  ProductInfo product = 1 [json_name = "product"];                        // 产品信息
}

// 商户获取产品请求
message MerchantGetProductRequest {
  string product_code = 1 [json_name = "productCode"];                    // 产品编码
  optional bool include_plans = 2 [json_name = "includePlans"];           // 是否包含套餐列表
}

//商户获取产品响应
message MerchantGetProductResponse {
  ProductInfo product = 1 [json_name = "product"];                        // 产品信息
}